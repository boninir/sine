{% extends 'AppBundle::layout.html.twig' %}

{% block core %}

    <div class="container theme-showcase" role="main">
        {% for flash_message in app.session.flashBag.get('notice') %}
            <div class="alert alert-success alert-dismissible flash-notice" role="alert">
                <button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                {{ flash_message }}
            </div>
        {% endfor %}
    </div>

    <div class="container">
        {{ form_start(formIntervention) }}
            {% for interv in formIntervention.interventions if interv.vars.data.typeIntervention.denomination == 'MÃ©canique' %}
                <div class="row" data-intervention-id="{{ interv.vars.data.id }}">
                    <br>
                    <div class="col-md-3"></div>
                    <div class="col-md-2 text-right">
                        <p><b>{{ interv.vars.data.denomination }}</b></p>
                    </div>
                    <div class="col-md-2">
                        {{ form_row(interv.select) }}
                    </div>

                    <div class="col-md-2">
                        <a class="btn btn-warning set-comment" data-target="#modal-{{ interv.vars.data.id }}" {% if interv.select.vars.data is empty %}disabled="disabled"{% else %}data-toggle="modal"{% endif %}>
                            <span class="content">Ajouter un commentaire</span>
                            <span class="glyphicon glyphicon-pencil" aria-hidden="true"></span>
                        </a>

                        <div class="modal fade text-left comment-modal" id="modal-{{ interv.vars.data.id }}" tabindex="-1" role="dialog">
                            <div class="modal-dialog" role="document">
                                <div class="modal-content">
                                    <div class="modal-header">
                                        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                                        <h4 class="modal-title">Commentaire</h4>
                                    </div>
                                    <div class="modal-body">
                                        {% form_theme interv.comment 'AppBundle:form:fields.html.twig' %}
                                        {{ form_row(interv.comment) }}
                                    </div>
                                    <div class="modal-footer">
                                        <button type="button" class="btn btn-primary" data-dismiss="modal">Retour</button>
                                        <button type="button" class="btn btn-success" data-dismiss="modal">Confirmer</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-3 text-left">
                        <div class="comment">
                            {% if interv.comment.vars.data != null %}
                                {{ interv.comment.vars.data }}
                            {% endif %}
                        </div>
                    </div>
                </div>
            {% endfor %}

            {{ form_widget(formIntervention) }}
        {{ form_end(formIntervention) }}
    </div>
{% endblock %}